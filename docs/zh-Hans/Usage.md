# 用户文档 - 输入法助手

目录：

- [安装](#安装)

- [功能介绍](#功能介绍)

- [配置选项](#配置选项)

- [问题反馈](#问题反馈)

- [已知问题](#已知问题)

# 安装

> **注意**：该插件仅适用于 Windows 版的 Blender。

> **注意**：当 Blender 以后台模式（--background）运行时，插件不会且无需启动。

> **注意**：由于需要使用指针和偏移量获取 Blender 的内部数据，从插件的 3.0.0 版开始，插件将对所支持的 Blender 版本进行严格限制。譬如 3.0.0 版最高支持 Blender 4.1.0，那么在 Blender 4.1.1 中将无法使用 3.0.0 版的插件，即插件不具备向前/向上/向新兼容特性。相关版本信息可以在插件的发布页中看到。

> **注意**：从插件的 3.0.0 版开始，将插件用于非官方 Blender 有可能会导致插件工作异常或程序崩溃。

1. 在 [GitHub](https://github.com/Arius-Cr/wire_ext_blender_fix_ime/releases) 或 [百度网盘](https://pan.baidu.com/s/1H9DxkAdmBJXLhl5Aj29Q6Q?pwd=q4e5
) 下载最新版的插件（.zip）。

2. 按 [Blender 用户手册](https://docs.blender.org/manual/zh-hans/latest/editors/preferences/addons.html#installing-add-ons) 提供的方式安装插件。

3. 按 [Blender 用户手册](https://docs.blender.org/manual/zh-hans/latest/editors/preferences/addons.html#enabling-disabling-add-ons) 提供的方式启动插件。

    现在的插件名称：**输入法助手**。

    之前的插件名称：**wire_fix_ime**。（3.0.0版本前）

# 功能介绍

该插件能够让 Blender 更好地支持 Windows 平台上的输入法。

让你在 Blender 的输入框、文本物体编辑模式、文本编辑器、控制台中，获得良好的输入法使用体验。

**功能特性**：

1. 在编辑器中支持输入法

    让用户可以在以下编辑器中，可以使用输入法直接输入文字：

    - 3D视图 - 文本物体编辑模式

    - 文本编辑器

    - 控制台

    Blender 本身仅支持在输入框中使用输入法，但使用插件后，可以让以上编辑器在用户需要输入文本时，也支持输入法。

2. 正确启停输入法

    - 在用户需要输入文字时启用输入法。

    - 在用户不需要输入文字时停用输入法，避免快捷键被输入法拦截。

    对于输入框，插件会在用户激活或退出输入框时，自动启用或停用输入法。Blender 自身具备激活输入框时自动启用输入法的功能，插件要做的是确保退出输入框时输入法能够被停用。

    对于编辑器，插件会在用户将鼠标移入或移出特定的编辑器，根据当前条件，自动启用或停用输入法。在编辑器中使用浮动菜单或面板（譬如右键单击时），输入法会自动停用（除非菜单或面板中的输入框被激活）。

3. 修复非IME字符的输入问题

    - 大写锁定时无法输入字符。

    - 某些输入法中涉及非IME字符的输入问题。

    该功能的机制是普适性的，不针对特定的输入法，因此任何输入法中类似的问题都会得到解决。

    这里的“非IME字符”，是指输入法不处理的字符按键，譬如在微软拼音输入法中，大写锁定时，输入法不处理字母按键，而在非大写锁定时，则会处理字母按键。不同的输入法其机制也不同，譬如微软日语输入法中，无论是否大写锁定，输入法都会处理字母按键。

    Blender 对这种按键的处理并不完善，最终导致按下按键后没有任何反应。本功能可以绕过 Blender 的这个缺憾，让这些按键能够被正常处理。

4. 使用 Shift + 鼠标按键 时，不会引发输入模式的切换

    > 仅适用于编辑器

    在编辑器中使用 Shift + 鼠标按键（一般为视图导航的快捷键）时，插件将确保输入法的输入模式（譬如：中/英）在释放 Shift 键后不会产生改变。

# 配置选项

- **增强输入框对输入法的支持** \[默认值：`True`]

    启用后，增强 Blender 输入框对输入法的支持。

- **增强编辑器对输入法的支持** \[默认值：`True`]

    启用后，增强 Blender 编辑器对输入法的支持。

    **子级选项**：

    - **3D视图 - 文本物体编辑模式** \[默认值：`True`]

        允许用户在3D视图文本物体的编辑模式中使用输入法输入文本。

        - **输入法候选窗水平位置** \[默认值：`0.4`]

            控制输入法候选窗口左侧相对3D视图底部的位置。

            取值范围：0-1，表示最左侧到最右侧。

    - **文本编辑器** \[默认值：`True`]

        允许用户在文本编辑器中使用输入法输入文本。

    - **控制台** \[默认值：`True`]

        允许用户在控制台中使用输入法输入文本。

# 问题反馈

为了让反馈更有效率，请在反馈时提供**能够让其它人复现出相同问题的步骤**，以及**相关的必要信息**，如版本号等。

问题反馈的写法可以参考 Blender 官方的反馈指南（需注册 Blender 账号）：[Blender 项目首页](https://projects.blender.org/) > Report a Bug

反馈示例：

```
在快捷菜单中按下按键没有效果

Blender v3.6.9，插件 v2.0.0

问题复现步骤：

1. 鼠标在文本编辑器中按下右键，弹出快捷菜单。

2. 按下"D"键应该执行操作，但没有效果。

不启用插件的时候是能够正常执行操作的，但是启用插件后就不能执行操作了。
```

# 已知问题

1. 部分输入法的候选窗口的位置可能没有出现在合理的位置。多数输入法对候选窗口的位置的定位规则都比较特立独行，所以要很好地定位候选窗口的位置是比较困难的。如果你所用的输入法在候选窗口位置上出现较大问题，可以向作者反馈。

2. 在微软拼音输入法的候选窗口打开的情况下，滚动鼠标滚轮会导致候选窗口消失，但不会中止输入，按常规的方式继续输入文字，候选窗口会重新出现。这似乎是微软拼音自身的特性。

3. 在文本编辑器中用英文模式输入“1”。在3D视图中将文本物体切换为编辑模式，然后输入“2”。按一次撤销，“2”被撤销。再按一次撤销，**物体不会变回物体模式**。再按一次撤销，“1”被撤销，此时物体才变回物体模式。但按三次重做时，会发现重做是遵循操作发生的次序进行的。该问题可能由物体模式在撤销重做系统中的特殊地位导致的。在插件无关的场景中也会出现，并非由本插件引起。